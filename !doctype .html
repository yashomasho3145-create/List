<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LIST｜成長志向タスクアプリ</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";margin:0;background:#f7f7f8;color:#111}
header{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;z-index:10}
.bar{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:12px 16px}
.tabs{display:flex;gap:8px}
.tab{padding:8px 12px;border-radius:999px;border:1px solid #ddd;background:#fff;cursor:pointer}
.tab.active{background:#111;color:#fff;border-color:#111}
.section{padding:12px 16px}
.list{display:flex;flex-direction:column;gap:10px}
.card{background:#fff;border:1px solid #eee;border-radius:14px;padding:12px 12px 8px;box-shadow:0 1px 2px rgba(0,0,0,.03)}
.row{display:flex;align-items:center;gap:8px;justify-content:space-between}
.title{font-weight:600;word-break:break-word}
.meta{font-size:12px;color:#666;display:flex;gap:10px;margin-top:4px}
.badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
.badge{font-size:11px;border:1px solid #ddd;border-radius:999px;padding:3px 8px;background:#fafafa}
.actions{display:flex;gap:8px;margin-top:10px}
button{appearance:none;border:1px solid #ddd;background:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
button.primary{background:#111;color:#fff;border-color:#111}
.pin{color:#d97706;border-color:#f1d19b;background:#fff8e6}
.ghost{opacity:.6}
.empty{color:#777;text-align:center;padding:40px 0}
.divider{margin:16px 0;border-top:1px dashed #e6e6e6}
</style>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<header>
<div class="bar">
<div style="font-weight:700">LIST</div>
<div class="tabs">
<div class="tab active" id="tabTasks">タスク</div>
<div class="tab" id="tabJournal">ジャーナル</div>
</div>
<div id="refreshBtn" class="tab" title="更新">↻</div>
</div>
</header>
<main class="section">
<div id="pinned" class="list"></div>
<div id="pinnedDivider" class="divider" style="display:none"></div>
<div id="active" class="list"></div>
<div id="completedDivider" class="divider" style="display:none"></div>
<div id="completed" class="list"></div>
<div id="empty" class="empty" style="display:none">タスクがありません</div>
</main>


<script>
const LIFF_ID = 'LIFF_ID_HERE';
const API_BASE = 'N8N_BASE_URL'; // 例: https://your-n8n.example.com/webhook


let userId = null;
let profile = null;


async function init() {
await liff.init({ liffId: LIFF_ID });
if (!liff.isLoggedIn()) liff.login();


try {
profile = await liff.getProfile();
userId = profile.userId;
} catch (e) {
console.error('LIFF profile error', e);
alert('LINEプロフィールの取得に失敗しました');
return;
}


bindUI();
await loadList();
}


function bindUI(){
document.getElementById('tabTasks').addEventListener('click', ()=>{
// ここでは画面切替のダミー（将来Journalに遷移）
alert('ジャーナルは後で実装します。今はタスク一覧のみ');
});
document.getElementById('tabJournal').addEventListener('click', ()=>{
alert('ジャーナルは後で実装します。今はタスク一覧のみ');
});
document.getElementById('refreshBtn').addEventListener('click', loadList);
</html>